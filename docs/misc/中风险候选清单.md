# 中风险候选清单（仅报告，未执行）

以下为可能引起构建/运行错误的整理项。**未获确认前请勿自动执行。** 若要做，需按「需改引用」逐项修改并跑完整验证。

---

## 1. scripts/ 路径或重命名

| 候选项 | 可能引用点（grep 证据） | 风险说明 | 若要做需改的引用 |
|--------|-------------------------|----------|------------------|
| `scripts/content-mapping.json` | [lib/content/loaders.ts](lib/content/loaders.ts) L5: `path.join(process.cwd(), "scripts/content-mapping.json")`；[scripts/sync-obsidian-content.mjs](scripts/sync-obsidian-content.mjs) L80 | 移动或重命名会破坏内容加载与同步 | 修改 loaders.ts、sync-obsidian-content.mjs 中的路径；若有文档引用需一并改 |
| `scripts/fix-font-paths.js` | [package.json](package.json) `"build": "next build && node scripts/fix-font-paths.js"`；[.github/workflows/nextjs.yml](.github/workflows/nextjs.yml) 通过 `npm run build` 间接调用 | 移动后 build 报错 | 修改 package.json scripts.build |
| `scripts/check-structure.mjs` | [package.json](package.json) `lint:structure`；[.github/workflows/docs-and-structure.yml](.github/workflows/docs-and-structure.yml) `npm run lint:structure` | 移动后 lint:structure 与 CI 失败 | 修改 package.json、CI 中命令或路径 |
| `scripts/check-doc-links.mjs` | [package.json](package.json) `docs:check`；[.github/workflows/docs-and-structure.yml](.github/workflows/docs-and-structure.yml) `npm run docs:check` | 同上 | 修改 package.json、CI |
| `scripts/sync-obsidian-content.mjs` | [package.json](package.json) `sync:content` / `sync:content:dev` | 移动后同步命令失败 | 修改 package.json |
| `scripts/generate-tokens.py` | [docs](docs)、[tokens/README.md](tokens/README.md) 中 `python3 scripts/generate-tokens.py` | 移动后文档与 README 中的说明失效；若仅文档引用可只改文档 | 修改 tokens/README.md 及所有引用该路径的文档 |

---

## 2. 资产路径（public/）

| 候选项 | 可能引用点（grep 证据） | 风险说明 | 若要做需改的引用 |
|--------|-------------------------|----------|------------------|
| `public/images/logo-icon.png` | [components/BrandLogo.tsx](components/BrandLogo.tsx) L11: `${basePath}/images/logo-icon.png` | 移动或重命名会断 Logo | 修改 BrandLogo.tsx 中路径 |
| `public/fonts/icofont/*` | [app/layout.tsx](app/layout.tsx) `${basePath}/fonts/icofont`、[scripts/fix-font-paths.js](scripts/fix-font-paths.js) 多处 `/fonts/icofont/`、[public/fonts/icofont/icofont.css](public/fonts/icofont/icofont.css) 内相对 url | 移动目录会破坏字体加载与 build 后路径修复 | 修改 layout.tsx、fix-font-paths.js、icofont.css 内相对路径；build 产物中的 href/url 逻辑 |
| `public/images/home-hero-dots.svg` | **无代码引用**（仅存在 `public/images/` 下；组件/样式用 class `.home-hero` 等，未发现对该 SVG 的引用） | 可能为历史或设计稿资源；删除前需人工确认是否被引用（如背景图、链接） | 若确认无用可直接删除；若移动需在引用处改路径（当前无引用） |

---

## 3. 根目录脚本

| 候选项 | 可能引用点（grep 证据） | 风险说明 | 若要做需改的引用 |
|--------|-------------------------|----------|------------------|
| `fix-port.sh` | 仅自身注释 `# 使用方法: ./fix-port.sh` | 无代码或 CI 引用；移至 `scripts/fix-port.sh` 仅影响人工执行方式 | **已执行**：fix-port.sh 已移至 scripts/fix-port.sh |

---

## 4. runtime 目录（app/、components/、lib/、hooks/）

- **tsconfig paths**：`@/*` → `./*`，`@/components/*`、`@/lib/*`、`@/config/*`、`@/styles/*`、`@/tokens/*` 等均指向仓库根下目录。任意移动/重命名被 import 的文件都会破坏路径。
- **引用证据**：大量 `from '@/components/...'`、`from '@/lib/...'`、`from '@/hooks/...'`、`from '@/data/...'`、`from '@/contexts/...'`（见 app/、components/ 下各 tsx）。
- **风险**：移动或重命名任何被引用的文件/目录需同步改：tsconfig.json `paths`、所有 import 语句、以及可能引用路径的文档/配置。
- **建议**：未规划重构前不做 runtime 目录移动/重命名；若做，需逐文件 grep 引用并改全量。

---

## 5. 依赖清理（package.json）

| 候选项 | 可能引用点（grep 证据） | 风险说明 | 若要做需改的引用 |
|--------|-------------------------|----------|------------------|
| `react-markdown` | [components/DocContent.tsx](components/DocContent.tsx) import + `<ReactMarkdown>`；[next.config.mjs](next.config.mjs) `optimizePackageImports` | 移除会导致文档页无法渲染 Markdown | 不可删 |
| `remark-gfm` | [components/DocContent.tsx](components/DocContent.tsx) import + `remarkPlugins={[remarkGfm]}`；[next.config.mjs](next.config.mjs) | 同上 | 不可删 |
| `next` / `react` / `react-dom` | 全项目 | 移除会破坏构建与运行 | 不可删 |

**结论**：当前 dependencies 与 devDependencies 均被使用，无低风险可删依赖；若有版本升级或替换方案需单独评估。

---

## 6. CI 引用

- [.github/workflows/docs-and-structure.yml](.github/workflows/docs-and-structure.yml)：`npm ci`、`npm run lint:structure`、`npm run docs:check`。仅依赖 package.json scripts，未直接写死脚本路径。
- [.github/workflows/nextjs.yml](.github/workflows/nextjs.yml)：`npm ci --ignore-scripts`、`npm run build`。同上。
- 若修改 package.json 中 script 名称或脚本路径，需确保上述 CI 中命令仍有效（一般仅改 script 内容即可）。

---

*本清单由零风险整理 Task 2 扫描生成；执行任何候选项前请先改齐引用并跑 lint:structure、docs:check、tsc、build 验证。*
